# 공압 튜브 시뮬레이션 환경 설정 및 실행 가이드

이 문서는 공압 튜브 시뮬레이션을 실행하기 위한 환경 설정 방법, 주요 파일 설명, 그리고 시뮬레이션 실행 시 조작할 수 있는 매개변수들에 대해 상세히 안내합니다.

## 1. 환경 설정

본 시뮬레이션은 Python 언어로 개발되었으며, 특정 라이브러리들에 의존합니다. 시뮬레이션을 성공적으로 실행하기 위해서는 다음 단계에 따라 필요한 환경을 설정해야 합니다.

### 1.1. Python 설치

시뮬레이션은 Python 3.x 버전에서 작동합니다. 아직 Python이 설치되어 있지 않다면, [Python 공식 웹사이트](https://www.python.org/downloads/)에서 최신 버전을 다운로드하여 설치하십시오. 설치 시 `Add Python to PATH` 옵션을 선택하는 것이 좋습니다.

### 1.2. 필수 라이브러리 설치

시뮬레이션 실행에 필요한 주요 Python 라이브러리는 다음과 같습니다:

*   **NumPy**: 과학 계산, 특히 배열 연산을 위한 필수 라이브러리입니다.
*   **VisPy**: 고성능 대화형 2D/3D 데이터 시각화를 위한 라이브러리입니다. OpenGL을 기반으로 합니다.
*   **PyQt5**: Python에서 GUI 애플리케이션을 개발하기 위한 크로스 플랫폼 프레임워크입니다. VisPy 시뮬레이션과 사용자 인터페이스를 연결하는 데 사용됩니다.

이 라이브러리들은 Python의 패키지 관리자인 `pip`를 사용하여 설치할 수 있습니다. 명령 프롬프트(Windows) 또는 터미널(macOS/Linux)을 열고 다음 명령어를 실행하십시오:

```bash
pip install numpy vispy PyQt5
```

설치 과정에서 오류가 발생한다면, 인터넷 연결 상태를 확인하거나 시스템 관리자 권한으로 명령 프롬프트/터미널을 실행해 보십시오. (예: Windows에서는 `관리자 권한으로 실행`, Linux/macOS에서는 `sudo` 접두사 사용)

### 1.3. 개발 환경 (선택 사항)

Visual Studio Code, PyCharm 등과 같은 통합 개발 환경(IDE)을 사용하면 코드 편집, 디버깅 및 실행이 더욱 편리합니다. 이러한 도구들은 Python 개발을 위한 다양한 기능을 제공하므로, 필요에 따라 설치하여 활용할 수 있습니다.




## 2. 주요 파일 설명

본 시뮬레이션 프로젝트는 여러 Python 파일로 구성되어 있으며, 각 파일은 특정 역할을 담당합니다. 시뮬레이션을 이해하고 효과적으로 사용하기 위해 각 파일의 역할을 아는 것이 중요합니다.

*   **`pneumatic_tube_simulation.py`**: 이 파일은 시뮬레이션의 핵심 물리 엔진을 포함합니다. 캐리어의 운동 역학, 송풍기, 에어 브레이크, 튜브 스위치 등 공압 튜브 시스템의 물리적 구성 요소들을 클래스로 정의하고, 이들 간의 상호작용을 계산하는 로직을 구현합니다. VisPy 시각화 모듈과 PyQt GUI와는 독립적으로 작동하며, 순수한 물리 계산을 담당합니다.

*   **`pneumatic_tube_simulation_headless.py`**: `pneumatic_tube_simulation.py`와 유사하지만, VisPy 시각화 모듈을 포함하지 않는 버전입니다. 이는 GUI 없이 물리 엔진의 동작만을 테스트하거나, 시뮬레이션 결과를 데이터로만 추출하고자 할 때 유용합니다. 서버 환경이나 시각화가 필요 없는 배치 처리 작업에 적합합니다.

*   **`main_gui.py`**: 이 파일은 시뮬레이션의 그래픽 사용자 인터페이스(GUI)를 정의합니다. PyQt5 프레임워크를 사용하여 구현되었으며, 사용자가 시뮬레이션 매개변수를 입력하고 조절하며, 시뮬레이션을 시작/정지/재설정하고, 실시간 시뮬레이션 결과를 확인할 수 있도록 합니다. `pneumatic_tube_simulation.py`의 물리 엔진과 VisPy 시각화 모듈을 통합하여 사용자에게 시각적이고 상호작용적인 경험을 제공합니다. **이 파일이 시뮬레이션을 실행하는 주된 진입점입니다.**

*   **`test_simulation_headless.py`**: `pneumatic_tube_simulation_headless.py`를 사용하여 시뮬레이션의 물리 엔진이 올바르게 작동하는지 테스트하기 위한 간단한 스크립트입니다. GUI 없이 시뮬레이션을 실행하고, 콘솔에 결과를 출력하여 물리 계산의 정확성을 검증하는 데 사용될 수 있습니다.

*   **`simulation_setup_guide.md` (현재 읽고 있는 파일)**: 시뮬레이션 환경 설정, 주요 파일 설명, 실행 방법 및 매개변수 조작에 대한 가이드를 제공하는 문서입니다.

이 파일들은 함께 작동하여 공압 튜브 시스템의 포괄적인 시뮬레이션 및 시각화 환경을 제공합니다. `main_gui.py`는 사용자에게 가장 완전한 경험을 제공하며, 다른 파일들은 특정 목적(예: 물리 엔진 테스트, GUI 없는 실행)을 위해 사용될 수 있습니다.




## 3. 실행 방법 및 조작 가능한 매개변수

환경 설정이 완료되고 주요 파일들의 역할을 이해했다면, 이제 시뮬레이션을 실행하고 다양한 매개변수를 조작하여 공압 튜브 시스템의 동작을 탐구할 수 있습니다.

### 3.1. 시뮬레이션 실행

시뮬레이션은 `main_gui.py` 파일을 통해 실행됩니다. 명령 프롬프트(Windows) 또는 터미널(macOS/Linux)을 열고, `main_gui.py` 파일이 있는 디렉토리로 이동한 후 다음 명령어를 입력하십시오:

```bash
python main_gui.py
```

명령어를 실행하면 공압 튜브 시뮬레이션 GUI 창이 나타날 것입니다. 이 창을 통해 시뮬레이션을 제어하고 결과를 시각적으로 확인할 수 있습니다.

### 3.2. 조작 가능한 매개변수

GUI 창에는 시뮬레이션의 물리적 특성을 조절할 수 있는 다양한 입력 필드와 슬라이더가 제공됩니다. 각 매개변수는 시뮬레이션 결과에 직접적인 영향을 미치므로, 값을 변경하면서 시스템의 반응을 관찰하는 것이 중요합니다.

다음은 GUI에서 조작 가능한 주요 매개변수 목록입니다:

| 매개변수 이름 | 설명 | 단위 | 기본값 | 조작 범위 (예시) | 영향 |
|---|---|---|---|---|---|
| **캐리어 질량** | 캐리어의 질량입니다. | kg | 0.1 | 0.01 ~ 1.0 | 질량이 클수록 가속 및 감속이 어려워집니다. |
| **캐리어 직경** | 캐리어의 직경입니다. | m | 0.04 | 0.01 ~ 0.1 | 직경이 클수록 공기 저항 및 추진력에 더 큰 영향을 미칩니다. |
| **튜브 길이** | 공압 튜브의 전체 길이입니다. | m | 5.0 | 1.0 ~ 20.0 | 캐리어가 이동해야 하는 총 거리입니다. |
| **공기 밀도** | 튜브 내부 공기의 밀도입니다. | $kg/m^3$ | 1.225 | 0.5 ~ 2.0 | 공기 저항 및 추진력에 직접적인 영향을 미칩니다. |
| **튜브 마찰 계수** | 캐리어와 튜브 벽 사이의 마찰 강도를 나타내는 계수입니다. | - | 0.05 | 0.01 ~ 0.5 | 마찰이 클수록 캐리어의 속도가 빠르게 줄어듭니다. |
| **공기 저항 계수** | 캐리어의 형태에 따른 공기 저항의 강도를 나타내는 계수입니다. | - | 0.47 | 0.1 ~ 1.0 | 계수가 클수록 공기 저항이 강해져 속도 감소가 커집니다. |
| **에어 브레이크 힘 계수** | 에어 브레이크가 활성화되었을 때 캐리어에 가해지는 제동력의 강도를 나타내는 계수입니다. | - | 0.8 | 0.1 ~ 2.0 | 계수가 클수록 더 강한 제동력이 가해집니다. |
| **송풍기 과압** | 송풍기가 공기를 불어넣을 때 생성하는 압력입니다. | Pa | 1000.0 | 100.0 ~ 5000.0 | 캐리어를 미는 힘의 크기를 결정합니다. |
| **송풍기 진공압** | 송풍기가 공기를 흡입할 때 생성하는 압력입니다. (음수 값) | Pa | -1000.0 | -5000.0 ~ -100.0 | 캐리어를 당기는 힘의 크기를 결정합니다. |
| **브레이크 시작 위치** | 에어 브레이크가 활성화되기 시작하는 튜브 내 위치입니다. | m | 4.0 | 0.0 ~ 튜브 길이 | 캐리어의 감속 시작 지점을 조절합니다. |
| **스위치 감지 위치** | 튜브 스위치가 캐리어를 감지하는 위치입니다. | m | 4.5 | 0.0 ~ 튜브 길이 | 캐리어의 도착 감지 지점을 조절합니다. |

**매개변수 조작 팁:**
*   **값 변경:** 각 입력 필드에 직접 숫자를 입력하거나, 슬라이더를 좌우로 움직여 값을 조절할 수 있습니다.
*   **실시간 관찰:** 매개변수를 변경한 후 `"시작"` 버튼을 클릭하여 시뮬레이션을 다시 시작하면, 변경된 매개변수가 시뮬레이션에 어떻게 영향을 미치는지 즉시 확인할 수 있습니다.
*   **실험:** 다양한 매개변수 조합을 시도하여 캐리어의 이동 속도, 스위치 도달 시간, 정지 거리 등이 어떻게 변하는지 실험해 보십시오. 예를 들어, 캐리어 질량을 늘리거나 마찰 계수를 줄이면 캐리어가 더 멀리 이동하는 것을 관찰할 수 있습니다.

### 3.3. 시뮬레이션 제어 버튼

GUI 하단에는 시뮬레이션의 흐름을 제어하는 세 가지 버튼이 있습니다:

*   **시작 (Start):** 현재 설정된 매개변수를 사용하여 시뮬레이션을 시작합니다. 시뮬레이션이 이미 실행 중인 경우, 이전에 실행되던 시뮬레이션을 중지하고 새로운 설정으로 다시 시작합니다.
*   **정지 (Stop):** 현재 실행 중인 시뮬레이션을 일시 정지합니다. 시뮬레이션은 정지된 위치에서 멈춥니다.
*   **재설정 (Reset):** 시뮬레이션을 초기 상태로 되돌리고, 모든 매개변수 값을 기본값으로 재설정합니다. 시뮬레이션 결과 표시도 초기화됩니다.

### 3.4. 시뮬레이션 결과 표시

GUI의 우측 하단에는 시뮬레이션의 주요 결과가 표시됩니다. 특히, 캐리어가 튜브 스위치에 도달하는 데 걸린 시간이 `스위치 도달 시간 (s)` 레이블에 실시간으로 업데이트됩니다. 시뮬레이션이 종료되면 최종 도달 시간이 표시되거나, 스위치에 도달하지 못한 경우 `N/A (스위치 미도달)`로 표시됩니다.

이 가이드를 통해 공압 튜브 시뮬레이션을 효과적으로 활용하고, 다양한 물리적 현상을 탐구하는 데 도움이 되기를 바랍니다.


